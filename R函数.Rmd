---
title: "Rå‡½æ•°"
author: "dududu"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  warning=FALSE,
  error=TRUE,
  message=FALSE
)
```

```{r}
x <- c(1:20)
```

1.  åŸºæœ¬æ•°å­¦å‡½æ•°
```{r}
round(x, digits) # IEEE 754 æ ‡å‡†çš„å››èˆäº”å…¥, ä¿ç•™ n ä½å°æ•°
signif(x, digits) # å››èˆäº”å…¥, ä¿ç•™ n ä½æœ‰æ•ˆæ•°å­—
ceiling(x) # å‘ä¸Šå–æ•´, ä¾‹å¦‚ ceiling(pi) ä¸º 4
floor(x) # å‘ä¸‹å–æ•´, ä¾‹å¦‚ floor(pi) ä¸º 3
sign(x) # ç¬¦å·å‡½æ•°
abs(x) # å–ç»å¯¹å€¼
sqrt(x) # æ±‚å¹³æ–¹æ ¹
exp(x) # e çš„ x æ¬¡å¹‚
log(x, base) # å¯¹ x å–ä»¥... ä¸ºåº•çš„å¯¹æ•°, é»˜è®¤ä»¥ e ä¸ºåº•
log2(x) # å¯¹ x å–ä»¥ 2 ä¸ºåº•çš„å¯¹æ•°
log10(x) # å¯¹ x å–ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°
Re(z) # è¿”å›žå¤æ•° z çš„å®žéƒ¨
Im(z) # è¿”å›žå¤æ•° z çš„è™šéƒ¨
Mod(z) # æ±‚å¤æ•° z çš„æ¨¡
Arg(z) # æ±‚å¤æ•° z çš„è¾è§’
Conj(z) # æ±‚å¤æ•° z çš„å…±è½­å¤æ•°
```

2.  ä¸‰è§’å‡½æ•°
```{r}
sin(x) # æ­£å¼¦å‡½æ•°
cos(x) # ä½™å¼¦å‡½æ•°
tan(x) # æ­£åˆ‡å‡½æ•°
asin(x) # åæ­£å¼¦å‡½æ•°
acos(x) # åä½™å¼¦å‡½æ•°
atan(x) # åæ­£åˆ‡å‡½æ•°
sinh(x) # åŒæ›²æ­£å¼¦å‡½æ•°
cosh(x) # åŒæ›²ä½™å¼¦å‡½æ•°
tanh(x) # åŒæ›²æ­£åˆ‡å‡½æ•°
asinh(x) # ååŒæ›²æ­£å¼¦å‡½æ•°
acosh(x) # ååŒæ›²ä½™å¼¦å‡½æ•°
atanh(x) # ååŒæ›²æ­£åˆ‡å‡½æ•°
```

3.  çŸ©é˜µå‡½æ•°ï¼ˆéƒ¨åˆ†å¯ç”¨äºŽæ•°æ®æ¡†ï¼‰
```{r}
nrow(A) # è¿”å›žçŸ©é˜µ A çš„è¡Œæ•°
ncol(A) # è¿”å›žçŸ©é˜µ A çš„åˆ—æ•°
dim(A) # è¿”å›žçŸ©é˜µ x çš„ç»´æ•° (å‡ è¡Œ Ã— å‡ åˆ—)
colSums(A) # å¯¹çŸ©é˜µ A çš„å„åˆ—æ±‚å’Œ
rowSums(A) # å¯¹çŸ©é˜µ A çš„å„è¡Œæ±‚å’Œ
colMeans(A) # å¯¹çŸ©é˜µ A çš„å„åˆ—æ±‚å‡å€¼
rowMeans(A) # å¯¹çŸ©é˜µ A çš„å„è¡Œæ±‚å‡å€¼
t(A) # å¯¹çŸ©é˜µ A è½¬ç½®
det(A) # è®¡ç®—æ–¹é˜µ A çš„è¡Œåˆ—å¼
crossprod(A, B) # è®¡ç®—çŸ©é˜µ A ä¸Ž B çš„å†…ç§¯, t(A) %*% B
outer(A, B) # è®¡ç®—çŸ©é˜µçš„å¤–ç§¯ (å‰ç§¯) , A %o% B
# å–çŸ©é˜µå¯¹è§’çº¿å…ƒç´ ï¼Œæˆ–æ ¹æ®å‘é‡ç”Ÿæˆå¯¹è§’çŸ©é˜µ
diag(x)
diag(n) # ç”Ÿæˆ n é˜¶å•ä½çŸ©é˜µ
solve(A) # æ±‚é€†çŸ©é˜µ (è¦æ±‚çŸ©é˜µå¯é€†)
solve(A, B) # è§£çº¿æ€§æ–¹ç¨‹ç»„ AX=B
# æ±‚çŸ©é˜µ A çš„å¹¿ä¹‰é€† (Moore-Penrose é€†), MASS åŒ…
ginv(A)
eigen() # è¿”å›žçŸ©é˜µçš„ç‰¹å¾å€¼ä¸Žç‰¹å¾å‘é‡ (åˆ—)
kronecker(A, B) # è®¡ç®—çŸ©é˜µ A ä¸Ž B çš„ Kronecker ç§¯
svd(A) # å¯¹çŸ©é˜µ A åšå¥‡å¼‚å€¼åˆ†è§£ï¼ŒA=UDV'
# å¯¹çŸ©é˜µ A åš QR åˆ†è§£: A=QR, Q ä¸ºé…‰çŸ©é˜µ, R ä¸ºé˜¶æ¢¯å½¢çŸ©é˜µ
qr(A)
# å¯¹æ­£å®šçŸ©é˜µ A åš Choleski åˆ†è§£, A=P'Pï¼ŒP ä¸ºä¸Šä¸‰è§’çŸ©é˜µ
chol(A)
A[upper.tri(A)] # æå–çŸ©é˜µ A çš„ä¸Šä¸‰è§’çŸ©é˜µ
A[lower.tri(A)] # æå–çŸ©é˜µ A çš„ä¸‹ä¸‰è§’çŸ©é˜µ
```

4.  æ¦‚çŽ‡å‡½æ•°
```{r}
factorial(n) # è®¡ç®— n çš„é˜¶ä¹˜
choose(n, k) # è®¡ç®—ç»„åˆæ•°
gamma(x) # Gamma å‡½æ•°
beta(a, b) # beta å‡½æ•°

combn(x, m) # ç”Ÿæˆ x ä¸­ä»»å– m ä¸ªå…ƒçš„æ‰€æœ‰ç»„åˆ, x ä¸ºå‘é‡æˆ–æ•´æ•° n
combn(4, 2)
combn(c(" ç”²"," ä¹™"," ä¸™"," ä¸"), 2)
```

-   R ä¸­å¸¸ç”¨çš„æ¦‚çŽ‡å‡½æ•°æœ‰å¯†åº¦å‡½æ•°ã€åˆ†å¸ƒå‡½æ•°ã€åˆ†ä½æ•°å‡½æ•°ã€ç”Ÿæˆéšæœºæ•°å‡½ æ•°ï¼Œå…¶å‰ç¼€è¡¨ç¤ºåˆ†åˆ«ä¸ºï¼š
    -   d = å¯†åº¦å‡½æ•°ï¼ˆdensityï¼‰
    -   p = åˆ†å¸ƒå‡½æ•°ï¼ˆdistributionï¼‰
    -   q = åˆ†ä½æ•°å‡½æ•°ï¼ˆquantileï¼‰
    -   r = ç”Ÿæˆéšæœºæ•°ï¼ˆrandomï¼‰ 
    ä¸Šè¿° 4 ä¸ªå­—æ¯ + åˆ†å¸ƒç¼©å†™ï¼Œå°±æž„æˆé€šå¸¸çš„æ¦‚çŽ‡å‡½æ•°ï¼Œä¾‹å¦‚ï¼š

    ```{r}
    dnorm(3, 0, 2) # æ­£æ€åˆ†å¸ƒ N(0, 4) åœ¨ 3 å¤„çš„å¯†åº¦å€¼
    pnorm(1:3, 1, 2) # N(1,4) åˆ†å¸ƒåœ¨ 1,2,3 å¤„çš„åˆ†å¸ƒå‡½æ•°å€¼

    # å‘½ä¸­çŽ‡ä¸º 0.02, ç‹¬ç«‹å°„å‡» 400 æ¬¡, è‡³å°‘å‡»ä¸­ä¸¤æ¬¡çš„æ¦‚çŽ‡
    1 - sum(dbinom(0:1, 400, 0.02))
    pnorm(2, 1, 2) - pnorm(0, 1, 2) # X~N(1, 4), æ±‚ P{0<X<=2}
    qnorm(1-0.025,0,1) # N(0,1) çš„ä¸Š 0.975 åˆ†ä½æ•°
    ```

5.  ç”Ÿæˆéšæœºæ•°

| åˆ†å¸ƒåç§°           | ç¼©å†™     | å‚æ•°åŠé»˜è®¤         |
|--------------------|----------|--------------------|
| äºŒé¡¹åˆ†å¸ƒ           | binom    | size,prob          |
| å¤šé¡¹åˆ†å¸ƒ           | multinom | size,prob          |
| è´ŸäºŒé¡¹åˆ†å¸ƒ         | nbinom   | size,prob          |
| å‡ ä½•åˆ†å¸ƒ           | geom     | prob               |
| è¶…å‡ ä½•åˆ†å¸ƒ         | hyper    | m,n,k              |
| æ³Šæ¾åˆ†å¸ƒ           | pois     | lambda             |
| å‡åŒ€åˆ†å¸ƒ           | unif     | min=0,max=1        |
| æŒ‡æ•°åˆ†å¸ƒ           | exp      | rate=1             |
| æ­£æ€åˆ†å¸ƒ           | norm     | mean=0,sd=1        |
| å¯¹æ•°æ­£æ€åˆ†å¸ƒ       | lnorm    | meanlog=0,stdlog=1 |
| tåˆ†å¸ƒ              | t        | df                 |
| å¡æ–¹åˆ†å¸ƒ           | chisq    | df                 |
| Fåˆ†å¸ƒ              | f        | df1,df2            |
| Wilcoxonç¬¦å·ç§©åˆ†å¸ƒ | signrank | n                  |
| Wilcoxonç§©å’Œåˆ†å¸ƒ   | wilcox   | m,n                |
| æŸ¯è¥¿åˆ†å¸ƒ           | cauchy   | location=0,scale=1 |
| Logisiticåˆ†å¸ƒ      | logis    | location=0,scale=1 |
| Weibullåˆ†å¸ƒ        | weibull  | shape,scale=1      |
| Gammaåˆ†å¸ƒ          | gamma    | shape,scale=1      |
| Betaåˆ†å¸ƒ           | beta     | shape1,shape2      |

6. ç»Ÿè®¡å‡½æ•°
```{r}
min(x) # æ±‚æœ€å°å€¼
cummin(x) # æ±‚ç´¯è®¡æœ€å°å€¼
max(x) # æ±‚æœ€å¤§å€¼
cummax(x) # æ±‚ç´¯è®¡æœ€å¤§å€¼
range(x) # æ±‚ x çš„èŒƒå›´ï¼š[æœ€å°å€¼, æœ€å¤§å€¼] (å‘é‡)
sum(x) # æ±‚å’Œ
cumsum(x) # æ±‚ç´¯è®¡å’Œ
prod(x) # æ±‚ç§¯
cumprod(x) # æ±‚ç´¯è®¡ç§¯
mean(x) # æ±‚å¹³å‡å€¼
median(x) # æ±‚ä¸­ä½æ•°
quantile(x, pr) # æ±‚åˆ†ä½æ•°, x ä¸ºæ•°å€¼å‘é‡, pr ä¸ºæ¦‚çŽ‡å€¼
sd(x) # æ±‚æ ‡å‡†å·®
var(x) # æ±‚æ–¹å·®
cov(x) # æ±‚åæ–¹å·®
cor(x) # æ±‚ç›¸å…³ç³»æ•°
scale(x, center=TRUE, scale=FALSE) # å¯¹æ•°æ®åšä¸­å¿ƒåŒ–: å‡åŽ»å‡å€¼
scale(x, center=TRUE, scale=TRUE) # å¯¹æ•°æ®åšæ ‡å‡†åŒ–
```
```{r}
# è‡ªå®šä¹‰å½’ä¸€åŒ–å‡½æ•°
Rescale = function(x, type = "pos") {
rng = range(x, na.rm = TRUE) # è®¡ç®—æœ€å°å€¼æœ€å¤§å€¼

if(type == "pos") {
  (x - rng[1]) / (rng[2] - rng[1])
  } else {
  (rng[2] - x) / (rng[2] - rng[1])
  }
}
```

7. æ—¶é—´åºåˆ—å‡½æ•°
- lag(x, k=1, ...): è®¡ç®—æ—¶é—´åºåˆ— x çš„ k é˜¶æ»žåŽ
- diff(x, lag=1, difference=1, ...): è®¡ç®—æ—¶é—´åºåˆ— x çš„æ»ž
åŽä¸º lag é˜¶çš„ difference é˜¶å·®åˆ†
- Y_ð‘¡çš„ð‘—é˜¶æ»žåŽä¸º Y_ð‘¡âˆ’ð‘—:
```{r}
x <-  ts(1:8, frequency = 4, start = 2015)
x
```
```{r}
x <-  c(1, 3, 6, 8, 10)
x
diff(x, differences = 1)
diff(x, differences = 2)
diff(x, lag = 2, differences = 1)
```
8. å…¶ä»–å‡½æ•°
```{r}
unique(x, ...) # è¿”å›žå”¯ä¸€å€¼, å³åŽ»æŽ‰é‡å¤å…ƒç´ æˆ–è§‚æµ‹

# åˆ¤æ–­å…ƒç´ æˆ–è§‚æµ‹æ˜¯å¦é‡å¤ (å¤šä½™), è¿”å›žé€»è¾‘å€¼å‘é‡
duplicated(x, ...)

anyDuplicated(x, ...) # è¿”å›žé‡å¤å…ƒç´ æˆ–è§‚æµ‹çš„ç´¢å¼•
rle(x) # ç»Ÿè®¡å‘é‡ä¸­è¿žç»­ç›¸åŒå€¼çš„é•¿åº¦
inverse.rle(x) # rle() çš„åå‘ç‰ˆæœ¬, x ä¸º list(lengths,values)
get() # mget(),æ ¹æ®åå­—èŽ·å–ä¸€ä¸ªæˆ–å¤šä¸ªå½“å‰å¯¹è±¡çš„å€¼
```

